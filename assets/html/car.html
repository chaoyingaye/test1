<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../css/reset.css" type="text/css">
    <link rel="stylesheet" href="../css/car.css" type="text/css">
    <script src="../../node_modules/jquery/dist/jquery.min.js" type="text/javascript"></script>
</head>
<body>

<div id="header" class="width">
    <ul>
        <li><span>用户名</span><a href="#">请登录</a>&nbsp;&nbsp;&nbsp;|</li>
        <li><a href="#">免费注册</a><a href="#">我的账户</a></li>
    </ul>
</div>
<style>
    #logo a{display: inline-block}
</style>
<div id="logo" class="width">
    <h1><a href="../../index.html"><img src="../img/1535680953978.png" alt=""></a></h1>
    <div class="step"></div>
</div>

<div id="carTitle" class="width">
    <span>我的购物车</span>
    <div class="listwarp">
        <span>送至：</span>
        <form action="">
            <div class="text"><em>北京海淀区海定区五环内</em>
            <i></i>
            </div>
           <div class="textcont clearfix" style='display: none'>
                <b>×</b>
               <ul class="clearfix">
                   <li class="1s current shengone">北京</li>
                   <li class="2s shione">请选择</li>
               </ul>
               <div class="sheng clearfix" style='display: block'>
                   <span>北京</span>
                   <span>山东省</span>
                   <span>河北省</span>
                   <span>山西省</span>
                   <span>内蒙古自治区</span>
                   <span>辽宁省</span>
                   <span>吉林省</span>
                   <span>黑龙江省</span>
                   <span>上海</span>
                   <span>江苏</span>
                   <span>山东省</span>
                   <span>天津</span>
                   <span>河北省</span>
                   <span>山西省</span>
                   <span>内蒙古自治区</span>
               </div>
               <div class="shi clearfix" style='display: none'>
                   <span>济南市</span>
                   <span>青岛市</span>
                   <span>淄博市</span>
                   <span>德州市</span>
                   <span>烟台市</span>
                   <span>潍坊市</span>
                   <span>泰安市</span>
                   <span>临沂市</span>
                   <span>滨州市</span>
                   <span>东营市</span>
                   <span>威海市</span>
                   <span>枣庄市</span>
                   <span>聊城市</span>
                   <span>菏泽市</span>
                   <span>莱芜市</span>
                   <span>济宁市</span>
                   <span>日照市</span>
               </div>
           </div>
        </form>
    </div>
</div>

<div id="dan" class="width">
    <div><div>我买网发货单(<span>1</span>)</div></div>
</div>

<div id="sumShop" class="width">
    <ul class="title ">
        <li class="liTitle">商品</li>
        <li class="liTitle">单价</li>
        <li class="liTitle">数量</li>
        <li class="liTitle">重量</li>
        <li class="liTitle">小计</li>
        <li class="liTitle">操作</li>
    </ul>
    <div class="shops ">

       <!-- <ul class="item clearfix">
            <li class="check"><input type="checkbox"></li>
            <li class="icon">
                <a href="#">
                    <img src="http://pic1.womai.com/upload/601/603/606/66102/66104/570415/570415_1_pic270_4590.jpg" alt="">
                </a>
            </li>
            <li class="msg"><p>【中粮海外直采】sunmaid阳光少女加州葡萄干520g(美国进口 罐)</p></li>
            <li class="price">￥36.90</li>
            <li class="nums">
                <div class="stepNum">
                    <div class="step sub">-</div>
                    <div class="step input">1</div>
                    <div class="step add">+</div>
                </div>
                &lt;!&ndash;<script>&ndash;&gt;
                    &lt;!&ndash;$(".sub")[0].addEventListener("click",changeStepNumHandler);&ndash;&gt;
                    &lt;!&ndash;$(".add")[0].addEventListener("click",changeStepNumHandler);&ndash;&gt;
                    &lt;!&ndash;function changeStepNumHandler(e) {&ndash;&gt;
                        &lt;!&ndash;console.log($(".input")[0].textContent);&ndash;&gt;
                        &lt;!&ndash;var input=$(".input")[0].textContent;&ndash;&gt;
                        &lt;!&ndash;if(this.textContent==="+"){&ndash;&gt;
                            &lt;!&ndash;if($(".input")[0].textContent===99)return;&ndash;&gt;
                            &lt;!&ndash;$(".input")[0].textContent=parseInt(input)+1;&ndash;&gt;
                        &lt;!&ndash;}else if(this.textContent==="-"){&ndash;&gt;
                            &lt;!&ndash;if($(".input")[0].textContent===1)return;&ndash;&gt;
                            &lt;!&ndash;$(".input")[0].textContent=parseInt(input)-1;&ndash;&gt;
                        &lt;!&ndash;}&ndash;&gt;
                    &lt;!&ndash;}&ndash;&gt;
                &lt;!&ndash;</script>&ndash;&gt;
            </li>
            <li class="weight">0.55</li>
            <li class="sum">￥36.90</li>
            <li class="act">删除</li>
        </ul>
        -->
    </div>
</div>

<div id="footer" class="width">
    <div>
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010102000458">
            <i></i>
            京公网安备 11010102000458号
        </a>
        &nbsp;&nbsp;京ICP备 13003995号&nbsp;&nbsp;营业执照（统一社会信用代码）91110000055590239L&nbsp;&nbsp;食品经营许可证：JY11105020028185
    </div>
    <span>
        Copyright©2009-2018 womai.com.hk 版权所有
    </span>
</div>


<script>
const URL="http://10.9.42.213:3008";
    var data0=[
        {id:1000,alt:"饼干",weight:"1.5kg",icon:"http://pic2.womai.com/upload/601/602/54301/57276/57276_0_pic270_1177.jpg",desc:"Danisa皇冠丹麦曲奇饼干908g",price:"89.00"},
        {id:1001,alt:"饼干",weight:"2.0kg",icon:"http://pic1.womai.com/upload/backend/2018/11/06/14/1541487135944.jpg"},
        {id:1002,alt:"饼干",weight:"2.5kg",icon:"http://pic3.womai.com/upload/601/602/51600/564393/564393_1_pic270_5762.jpg",desc:"绅士牌Planters精选大罐混合果",price:"91.00"},
        {id:1003,alt:"饼干",weight:"1.5kg",icon:"http://pic3.womai.com/upload/601/603/606/66102/496889/496894/625566/625566_1_pic270_5737.jpg",desc:"【中粮海外直采】Ocean Spray",price:"81.00"},
        {id:1004,alt:"饼干",weight:"10kg",icon:"http://pic1.womai.com/upload/601/603/606/66102/66108/496885/649132/649132_1_pic270_4442.jpg",desc:"Perrier巴黎水含天然矿泉水",price:"1.02"},
        {id:1006,alt:"饼干",weight:"1.0kg",icon:"http://pic1.womai.com/upload/601/603/606/6700/6702/10181557/10181557_1_pic270_6790.jpg",desc:"【中粮海外直采】柏思蜜",price:"124.0"},
        {id:1007,alt:"饼干",weight:"13kg",icon:"http://pic3.womai.com/upload/601/603/606/66102/214300/10261990/10261990_1_pic270_5649.jpg",desc:"【中粮海外直采】SIN YOON",price:"320"},
        {id:1008,alt:"饼干",weight:"0.5kg",icon:"http://pic1.womai.com/upload/601/603/606/66102/66104/570415/570415_1_pic270_4590.jpg",desc:"Danisa皇冠丹麦曲奇饼干908g",price:"45.0"},
        {id:1009,alt:"饼干",weight:"65kg",icon:"http://pic3.womai.com/upload/601/603/606/66102/66104/588795/588795_0_pic270_9755.jpg",desc:"Danisa皇冠丹麦曲奇饼干908g",price:"89"},
        {id:1010,alt:"饼干",weight:"3.5kg",icon:"http://pic2.womai.com/upload/601/603/606/66102/496890/496895/611240/611240_1_pic270_8688.jpg",desc:"Danisa皇冠丹麦曲奇饼干908g",price:"75.02"},
        {id:1011,alt:"饼干",weight:"2.5kg",icon:"http://pic3.womai.com/upload/601/603/606/66102/66108/496884/619146/619146_1_pic270_2014.jpg",desc:"绅士牌Planters精选大罐混合果",price:"32.00"},
        {id:1012,alt:"饼干",weight:"1.5kg",icon:"http://pic2.womai.com/upload/601/603/606/66102/214300/10532854/10532854_1_pic270_6194.jpg",desc:"【中粮海外直采】Ocean Spray",price:"891"},
        {id:1013,alt:"饼干",weight:"1.3kg",icon:"http://pic3.womai.com/upload/601/604/439208/10765845/10765845_0_pic270_9197.jpg",desc:"Perrier巴黎水含天然矿泉水",price:"12.32"},
        {id:1014,alt:"饼干",weight:"5.5kg",icon:"http://pic3.womai.com/upload/601/603/606/6060/6064/6082/588899/588899_1_pic270_8395.jpg",desc:"【中粮海外直采】柏思蜜",price:"11.00"},
        {id:1015,alt:"饼干",weight:"1.5kg",icon:"http://pic2.womai.com/upload/601/603/606/6060/6064/6082/588900/588900_1_pic270_658.jpg",desc:"绅士牌Planters精选大罐混合果",price:"32.0"},

        {id:1016,alt:"饼干",icon:"http://pic3.womai.com/upload/601/603/606/64306/280375/219300/219302/595096/595096_2_pic270_8155.jpg",desc:"Danisa皇冠丹麦曲奇饼干908g",price:"89"},
        {id:1017,alt:"饼干",icon:"http://pic1.womai.com/upload/backend/2018/11/06/14/1541487135944.jpg"},
        {id:1018,alt:"饼干",icon:"http://pic1.womai.com/upload/601/603/606/64306/280375/82817/219363/606484/606484_1_pic270_4740.jpg",desc:"绅士牌Planters精选大罐混合果",price:"89"},
        {id:1019,alt:"饼干",icon:"http://pic3.womai.com/upload/601/603/606/64306/280375/82402/82505/627180/627180_1_pic270_1461.jpg",desc:"【中粮海外直采】Ocean Spray",price:"89"},
        {id:1020,alt:"饼干",icon:"http://pic3.womai.com/upload/601/603/606/7500/7502/638999/638999_1_pic270_3474.jpg",desc:"Perrier巴黎水含天然矿泉水",price:"89"},
        {id:1021,alt:"饼干",icon:"http://pic3.womai.com/upload/601/603/606/64306/280375/219300/219302/644726/644726_1_pic270_4929.jpg",desc:"【中粮海外直采】柏思蜜",price:"89"},
        {id:1022,alt:"饼干",icon:"http://pic2.womai.com/upload/601/603/606/64306/280375/82402/82506/659244/659244_1_pic270_9400.jpg",desc:"【中粮海外直采】SIN YOON",price:"89"},

        {id:1023,alt:"饼干",icon:"http://pic1.womai.com/upload/601/603/606/64306/280375/82402/82505/584317/584317_1_pic270_899.jpg",desc:"Danisa皇冠丹麦曲奇饼干908g",price:"89"},
        {id:1024,alt:"饼干",icon:"http://pic2.womai.com/upload/601/603/606/64306/280375/219300/219301/599165/599165_1_pic270_9327.jpg",desc:"Danisa皇冠丹麦曲奇饼干908g",price:"89"},
        {id:1025,alt:"饼干",icon:"http://pic1.womai.com/upload/601/603/606/64306/280375/82402/219343/613819/613819_1_pic270_21.jpg",desc:"Danisa皇冠丹麦曲奇饼干908g",price:"89"},
        {id:1026,alt:"饼干",icon:"http://pic2.womai.com/upload/601/603/606/7500/7502/643740/643740_1_pic270_210.jpg",desc:"绅士牌Planters精选大罐混合果",price:"89"},
        {id:1027,alt:"饼干",icon:"http://pic1.womai.com/upload/601/603/606/64306/280375/82402/219341/659492/659492_1_pic270_9681.jpg",desc:"【中粮海外直采】Ocean Spray",price:"89"},
        {id:1028,alt:"饼干",icon:"http://pic2.womai.com/upload/601/604/439208/10760651/10760651_1_pic270_728.JPG",desc:"Perrier巴黎水含天然矿泉水",price:"89"},
        {id:1029,alt:"饼干",icon:"http://pic3.womai.com/upload/601/602/66008/523926/523926_1_pic270_9468.jpg",desc:"【中粮海外直采】柏思蜜",price:"89"},
        {id:1030,alt:"饼干",icon:"http://pic1.womai.com/upload/601/603/210641/210654/210656/550674/550674_0_pic270_190.jpg",desc:"绅士牌Planters精选大罐混合果",price:"89"}
    ];
    var url=location.search.split("?")[1];
    var id=url.split("&")[0].split("=")[1];
     var shoppingList=[];
    for(var i=0;i<data0.length;i++){
        if(data0[i].id==id) {
            item=data0[i];}}
    addItemShop(item);
    function addItemShop(obj) {
        var arr=shoppingList.filter(function (t) {
        return t.id===item.id;
    });
    if(arr.length===0){
        var obj={select:false};
        Object.assign(obj,item);
        obj.nums=url.split("&")[1].split("=")[1];
        obj.sum=parseInt(obj.nums)*parseFloat(item.price);
        obj.deleted=false;
        shoppingList.push(obj);
    }else{
        arr[0].nums++;
        arr[0].sum=arr[0].nums*arr[0].price;
    }
    localStorage.shopData=JSON.stringify(shoppingList);
    return shoppingList;
}
console.log(shoppingList);

    var ul=$(".textcont>ul")[0];
    ul.addEventListener("click",ulClickHandler);
    function ulClickHandler(e) {
        if(e.target.className[0]==1){
            $(".sheng").css({display:"block"});
            $(".shi").css({display:"none"});
        }else if(e.target.className[0]==2){
            $(".shi").css({display:"block",zIndex:"10"});
            $(".sheng").css({display:"none"});
        }
        console.log(e.target.className);
    }
    $(".textcont>b")[0].addEventListener("click",closeHandler);
    function closeHandler(e) {
        $(".textcont")[0].style.display="none";
    }
    $(".text")[0].addEventListener("click",openHandler);
    function openHandler(e) {
        $(".textcont")[0].style.display="block";
    }
    $(".sheng")[0].addEventListener("click",selectsheng);
    function selectsheng(e) {
        $(".shengone")[0].textContent=e.target.textContent;
        $(".shi").css({display:"block",zIndex:"10"});
        $(".sheng").css({display:"none"});
    }
    $(".shi")[0].addEventListener("click",selectshi);
    function selectshi(e) {
        $(".shione")[0].textContent=e.target.textContent;
        $(".text>em")[0].textContent=$(".shengone")[0].textContent+e.target.textContent;
        $(".textcont")[0].style.display="none";
    }
    for(var i=0;i<shoppingList.length;i++){
        addShopItemMsg(shoppingList[i]);
    }

    function addShopItemMsg(obj) {
        var ul=$("<ul></ul>");
        ul.addClass("item").appendTo($(".shops"));
        ($("<li></li>")).addClass("check").append("<input type='checkbox' class='check'>").appendTo(ul);
        $("<img src=''/>").css({
            display:"inline-block",float:"left", width: "60px", height: "60px", border:"1px solid #dcdddd "
        }).attr("src",item.icon).appendTo($("<li></li>")).addClass("icon").appendTo(ul);
        $("<p></p>").text(obj.desc).css({width: "330px",float:"left", textAlign: "left", marginLeft: "20px", marginRight: "30px"
        }).appendTo($("<li></li>")).addClass("icon").appendTo(ul);
        $("<li></li>").addClass("price").text("￥"+obj.price).appendTo(ul);
        var numss=$("<li></li>").addClass("nums").appendTo(ul);
        $("<div></div>").addClass("stepNum").append("<div class=\"step sub\">-</div>\n" +
            "                <div class=\"step input\"></div>\n" +
            "                <div class=\"step add\">+</div>").appendTo(numss);
        $("<li></li>").addClass("weight").text(obj.weight).appendTo(ul);
        $("<li></li>").addClass("sum").text("￥"+obj.sum).appendTo(ul);
        $("<li></li>").addClass("act").text("删除").appendTo(ul);
        $(".input").text(obj.nums);
    }

console.log($(".sub")[0]);
$(".sub")[0].addEventListener("click",changeStepNumHandler);
$(".add")[0].addEventListener("click",changeStepNumHandler);
function changeStepNumHandler(e) {
    console.log($(".input")[0].textContent);
    var input=$(".input")[0].textContent;
    if(this.textContent==="+"){
        if($(".input")[0].textContent===99)return;
        $(".input")[0].textContent=parseInt(input)+1;
    }else if(this.textContent==="-"){
        if($(".input")[0].textContent===1)return;
        $(".input")[0].textContent=parseInt(input)-1;
    }
}

</script>
</body>
</html>


<!--
 <script>
            var ul=$("<ul></ul>");
            ul.addClass("item").appendTo($(".shops"));
            ($("<li></li>")).addClass("check").append("<input type='checkbox' class='check'>").appendTo(ul);
            $("<img src=''/>").css({
                display:"inline-block",float:"left", width: "60px", height: "60px", border:"1px solid #dcdddd "
            }).attr("src","http://pic1.womai.com/upload/601/603/606/66102/66104/570415/570415_1_pic270_4590.jpg").appendTo($("<li></li>")).addClass("icon").appendTo(ul);
            $("<p></p>").text("【中粮海外直采】sunmaid阳光少女加州葡萄干520g(美国进口 罐)").css({
                width: "330px",float:"left",
            textAlign: "left",
            marginLeft: "20px",
            marginRight: "30px"
            }).appendTo($("<li></li>")).addClass("icon").appendTo(ul);
           $("<li></li>").addClass("price").text("￥3.90").appendTo(ul);
            var numss=$("<li></li>").addClass("nums").appendTo(ul);
            $("<div></div>").addClass("stepNum").append("<div class=\"step sub\">-</div>\n" +
                "                <div class=\"step input\">1</div>\n" +
                "                <div class=\"step add\">+</div>").appendTo(numss);
            $("<li></li>").addClass("weight").text("0.55").appendTo(ul);
            $("<li></li>").addClass("sum").text("￥36.90").appendTo(ul);
            $("<li></li>").addClass("act").text("删除").appendTo(ul);
        </script>
-->